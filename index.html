<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTC AgriS S&OP Planning Dashboard</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & React DOM CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel Standalone for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-chartjs-2@5.2.0/dist/index.min.js"></script>
    
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            padding: 0;
        }
        
        * {
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, createElement } = React;
        const { createRoot } = ReactDOM;

        // ==================== ICONS COMPONENTS ====================
        const LayoutDashboard = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect width="7" height="9" x="3" y="3" rx="1"/>
                <rect width="7" height="5" x="14" y="3" rx="1"/>
                <rect width="7" height="9" x="14" y="12" rx="1"/>
                <rect width="7" height="5" x="3" y="16" rx="1"/>
            </svg>
        );

        const TrendingUp = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/>
                <polyline points="16 7 22 7 22 13"/>
            </svg>
        );

        const TrendingDown = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="22 17 13.5 8.5 8.5 13.5 2 7"/>
                <polyline points="16 17 22 17 22 11"/>
            </svg>
        );

        const Factory = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"/>
                <path d="M17 18h1"/>
                <path d="M12 18h1"/>
                <path d="M7 18h1"/>
            </svg>
        );

        const Package = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m7.5 4.27 9 5.15"/>
                <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/>
                <path d="m3.3 7 8.7 5 8.7-5"/>
                <path d="M12 22V12"/>
            </svg>
        );

        const Settings = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/>
                <circle cx="12" cy="12" r="3"/>
            </svg>
        );

        const Search = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="11" cy="11" r="8"/>
                <path d="m21 21-4.3-4.3"/>
            </svg>
        );

        const Bell = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/>
            </svg>
        );

        const Download = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" x2="12" y1="15" y2="3"/>
            </svg>
        );

        const User = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
            </svg>
        );

        const Calendar = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M8 2v4"/>
                <path d="M16 2v4"/>
                <rect width="18" height="18" x="3" y="4" rx="2"/>
                <path d="M3 10h18"/>
            </svg>
        );

        const Filter = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/>
            </svg>
        );

        const Info = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 16v-4"/>
                <path d="M12 8h.01"/>
            </svg>
        );

        const AlertTriangle = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"/>
                <path d="M12 9v4"/>
                <path d="M12 17h.01"/>
            </svg>
        );

        const CheckCircle = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
        );

        // ==================== COMPONENTS ====================

        // DashboardHeader Component
        function DashboardHeader({ title, subtitle, showSearch = true, showExport = false }) {
            return (
                <header className="bg-white border-b border-slate-200 px-8 py-4">
                    <div className="flex items-center justify-between">
                        <div>
                            <h1 className="text-2xl font-bold text-slate-900">{title}</h1>
                            {subtitle && <p className="text-sm text-slate-500 mt-0.5">{subtitle}</p>}
                        </div>

                        <div className="flex items-center gap-4">
                            {showSearch && (
                                <div className="relative">
                                    <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400" />
                                    <input
                                        type="text"
                                        placeholder="Search plant or SKU..."
                                        className="pl-10 pr-4 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent w-64"
                                    />
                                </div>
                            )}

                            {showExport && (
                                <button className="flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-medium hover:bg-emerald-700 transition-colors">
                                    <Download className="w-4 h-4" />
                                    Export Report
                                </button>
                            )}

                            <button className="p-2 hover:bg-slate-100 rounded-lg transition-colors">
                                <Bell className="w-5 h-5 text-slate-600" />
                            </button>

                            <div className="flex items-center gap-3 pl-4 border-l border-slate-200">
                                <div className="text-right">
                                    <p className="text-sm font-medium text-slate-900">Admin User</p>
                                    <p className="text-xs text-slate-500">Operations Lead</p>
                                </div>
                                <div className="w-10 h-10 rounded-full bg-gradient-to-br from-emerald-400 to-emerald-600 flex items-center justify-center">
                                    <User className="w-5 h-5 text-white" />
                                </div>
                            </div>
                        </div>
                    </div>
                </header>
            );
        }

        // MetricCard Component
        function MetricCard({ 
            title, 
            value, 
            unit, 
            change, 
            changeType = 'neutral',
            progressBar
        }) {
            const getChangeIcon = () => {
                switch (changeType) {
                    case 'positive': return <TrendingUp className="w-3 h-3" />;
                    case 'negative': return <TrendingDown className="w-3 h-3" />;
                    case 'warning': return <AlertTriangle className="w-3 h-3" />;
                    case 'neutral': return <CheckCircle className="w-3 h-3" />;
                }
            };

            const getChangeColor = () => {
                switch (changeType) {
                    case 'positive': return 'text-emerald-600';
                    case 'negative': return 'text-rose-600';
                    case 'warning': return 'text-amber-600';
                    case 'neutral': return 'text-blue-600';
                }
            };

            return (
                <div className="bg-white rounded-xl border border-slate-200 p-6 shadow-sm hover:shadow-md transition-shadow">
                    <div className="flex flex-col gap-1">
                        <p className="text-xs font-bold text-slate-400 uppercase tracking-wider">{title}</p>
                        
                        <div className="flex items-baseline gap-2 mt-2">
                            <h3 className="text-2xl font-bold text-slate-900 tracking-tight">{value}</h3>
                            {unit && <span className="text-sm font-medium text-slate-400 uppercase">{unit}</span>}
                        </div>

                        {change && (
                            <div className={`flex items-center gap-1.5 mt-3 ${getChangeColor()}`}>
                                {getChangeIcon()}
                                <span className="text-xs font-bold">{change}</span>
                            </div>
                        )}

                        {progressBar && (
                            <div className="mt-3">
                                <div className="w-full bg-slate-100 rounded-full h-1.5">
                                    <div 
                                        className={`h-1.5 rounded-full ${progressBar.color}`}
                                        style={{ width: `${progressBar.value}%` }}
                                    />
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Sidebar Component
        function Sidebar({ currentPage, onNavigate }) {
            const navItems = [
                { id: 'overview', label: 'Overview', icon: LayoutDashboard },
                { id: 'demand', label: 'Demand', icon: TrendingUp },
                { id: 'supply', label: 'Supply', icon: Factory },
                { id: 'inventory', label: 'Inventory', icon: Package },
            ];

            return (
                <aside className="bg-white w-64 h-screen flex flex-col border-r border-slate-200 shrink-0">
                    {/* Logo */}
                    <div className="p-6">
                        <div className="flex items-center gap-3">
                            <div className="w-10 h-10 rounded-lg bg-emerald-600 flex items-center justify-center shadow-sm">
                                <Factory className="w-6 h-6 text-white" />
                            </div>
                            <div>
                                <h1 className="text-base font-bold text-slate-900">TTC AgriS</h1>
                                <p className="text-[10px] text-emerald-600 font-bold tracking-widest uppercase">S&OP System</p>
                            </div>
                        </div>
                    </div>

                    {/* Navigation */}
                    <nav className="flex-1 px-4 space-y-1">
                        {navItems.map((item) => {
                            const active = currentPage === item.id;
                            const Icon = item.icon;
                            return (
                                <button
                                    key={item.id}
                                    onClick={() => onNavigate(item.id)}
                                    className={`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors ${
                                        active
                                            ? 'bg-emerald-50 text-emerald-600 border border-emerald-100'
                                            : 'text-slate-600 hover:bg-slate-50'
                                    }`}
                                >
                                    <Icon className="w-5 h-5" />
                                    <span className="text-sm font-medium">{item.label}</span>
                                </button>
                            );
                        })}
                        <button className="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 hover:bg-slate-50 transition-colors">
                            <Settings className="w-5 h-5" />
                            <span className="text-sm font-medium">S&OP Parameters</span>
                        </button>
                    </nav>

                    {/* System Status */}
                    <div className="p-4">
                        <div className="bg-emerald-50 border border-emerald-200 rounded-xl p-4">
                            <p className="text-[10px] font-bold text-emerald-600 uppercase tracking-wide mb-2">
                                System Status
                            </p>
                            <div className="flex items-center gap-2">
                                <div className="w-2 h-2 rounded-full bg-emerald-600 shadow-[0_0_8px_rgba(5,150,105,0.4)]" />
                                <span className="text-xs text-slate-700 font-medium">Live Optimization Active</span>
                            </div>
                        </div>
                    </div>
                </aside>
            );
        }

        // ==================== PAGE COMPONENTS ====================

        // Overview Page
        function OverviewPage() {
            const months = ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN'];

            useEffect(() => {
                const demandSupplyCtx = document.getElementById('demandSupplyChart');
                const accuracyCtx = document.getElementById('accuracyChart');
                const dosCtx = document.getElementById('dosChart');
                const waterfallCtx = document.getElementById('waterfallChart');

                if (demandSupplyCtx) {
                    new Chart(demandSupplyCtx, {
                        type: 'bar',
                        data: {
                            labels: months,
                            datasets: [
                                {
                                    type: 'bar',
                                    label: 'Actual Sales',
                                    data: [850, 1100, 900, 1250, 950, 1150],
                                    backgroundColor: '#10b981',
                                    borderRadius: 4
                                },
                                {
                                    type: 'line',
                                    label: 'Forecast',
                                    data: [820, 1050, 920, 1200, 980, 1180],
                                    borderColor: '#2563eb',
                                    borderWidth: 2,
                                    borderDash: [5, 5],
                                    pointRadius: 0,
                                    tension: 0.3
                                },
                                {
                                    type: 'line',
                                    label: 'Supply Plan',
                                    data: [900, 1100, 950, 1300, 1000, 1200],
                                    borderColor: '#94a3b8',
                                    borderWidth: 2,
                                    borderDash: [10, 5],
                                    pointRadius: 0,
                                    tension: 0.3
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: { padding: 15, usePointStyle: true, font: { size: 11 } }
                                }
                            },
                            scales: {
                                x: { grid: { display: false }, ticks: { font: { size: 10 } } },
                                y: { grid: { color: '#f1f5f9' }, ticks: { font: { size: 10 } } }
                            }
                        }
                    });
                }

                if (accuracyCtx) {
                    new Chart(accuracyCtx, {
                        type: 'bar',
                        data: {
                            labels: ['AgriC (Agricultural)', 'ProC (Processed)', 'ComC (Commercial)'],
                            datasets: [{
                                data: [92.4, 84.1, 78.5],
                                backgroundColor: ['#10b981', '#3b82f6', '#94a3b8'],
                                borderRadius: 6
                            }]
                        },
                        options: {
                            indexAxis: 'y',
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: {
                                x: { grid: { color: '#f1f5f9' }, min: 0, max: 100, ticks: { font: { size: 10 } } },
                                y: { grid: { display: false }, ticks: { font: { size: 11 } } }
                            }
                        }
                    });
                }

                if (dosCtx) {
                    new Chart(dosCtx, {
                        type: 'bar',
                        data: {
                            labels: ['Target', 'Current'],
                            datasets: [{
                                data: [30, 28],
                                backgroundColor: ['#ef4444', '#3b82f6'],
                                borderRadius: 8
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: {
                                x: { grid: { display: false }, ticks: { font: { size: 10 } } },
                                y: { 
                                    grid: { color: '#f1f5f9' }, 
                                    beginAtZero: true, 
                                    max: 35,
                                    ticks: { 
                                        font: { size: 10 },
                                        callback: (value) => value + ' days'
                                    }
                                }
                            }
                        }
                    });
                }

                if (waterfallCtx) {
                    new Chart(waterfallCtx, {
                        type: 'bar',
                        data: {
                            labels: ['Opening', 'Production', 'Sales', 'Closing'],
                            datasets: [{
                                label: 'Inventory Flow',
                                data: [1500, 1200, -1100, 1300],
                                backgroundColor: ['#3b82f6', '#10b981', '#ef4444', '#1e293b'],
                                borderRadius: 4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: {
                                x: { grid: { display: false }, ticks: { font: { size: 10 } } },
                                y: { 
                                    grid: { color: '#f1f5f9' }, 
                                    ticks: { 
                                        font: { size: 10 },
                                        callback: (value) => value + 'M'
                                    }
                                }
                            }
                        }
                    });
                }
            }, []);

            return (
                <div className="flex-1 overflow-auto bg-slate-50">
                    <DashboardHeader 
                        title="Executive Overview" 
                        subtitle="TTC AgriS S&OP/IBP Planning Dashboard"
                        showExport={true}
                    />
                    
                    <div className="p-8 space-y-6">
                        {/* Date Selector */}
                        <div className="flex items-center justify-between">
                            <div className="flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-lg">
                                <Calendar className="w-4 h-4 text-slate-500" />
                                <span className="text-sm font-medium text-slate-700">Jan 2024 - Jun 2024</span>
                            </div>
                        </div>

                        {/* KPI Cards */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            <MetricCard
                                title="Total Demand vs Supply"
                                value="1.2M / 1.15M"
                                change="+2.4%"
                                changeType="negative"
                                progressBar={{ value: 88.5, color: 'bg-emerald-500' }}
                            />
                            <MetricCard
                                title="Forecast Accuracy %"
                                value="88.5%"
                                change="+1.2%"
                                changeType="positive"
                                progressBar={{ value: 88.5, color: 'bg-emerald-500' }}
                            />
                            <MetricCard
                                title="Supply Adherence %"
                                value="92.1%"
                                change="+0.5%"
                                changeType="positive"
                                progressBar={{ value: 92.1, color: 'bg-blue-500' }}
                            />
                            <MetricCard
                                title="Service Level %"
                                value="96.4%"
                                change="+0.2%"
                                changeType="positive"
                                progressBar={{ value: 96.4, color: 'bg-purple-500' }}
                            />
                        </div>

                        {/* Charts Row 1 */}
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div className="lg:col-span-2 bg-white rounded-xl border border-slate-200 p-6">
                                <div className="mb-4">
                                    <h3 className="text-lg font-bold text-slate-900">Demand vs Supply Analysis (6-Month Trend)</h3>
                                    <p className="text-sm text-slate-500 mt-1">Actual Sales vs Forecast vs Supply Plan</p>
                                </div>
                                <div className="h-80">
                                    <canvas id="demandSupplyChart"></canvas>
                                </div>
                            </div>

                            <div className="bg-white rounded-xl border border-slate-200 p-6">
                                <div className="mb-4">
                                    <h3 className="text-lg font-bold text-slate-900">Accuracy by Group</h3>
                                </div>
                                <div className="h-80">
                                    <canvas id="accuracyChart"></canvas>
                                </div>
                                <div className="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                    <p className="text-xs text-blue-700">
                                        ðŸ’¡ ComC variance primarily driven by global market volatility in #2. Reviewing regional logistics constraints.
                                    </p>
                                </div>
                            </div>
                        </div>

                        {/* Charts Row 2 */}
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div className="bg-white rounded-xl border border-slate-200 p-6">
                                <div className="mb-4">
                                    <h3 className="text-lg font-bold text-slate-900">Days of Supply (DoS) vs Target</h3>
                                    <p className="text-sm text-slate-500 uppercase tracking-wide">In Days</p>
                                </div>
                                <div className="h-64">
                                    <canvas id="dosChart"></canvas>
                                </div>
                            </div>

                            <div className="bg-white rounded-xl border border-slate-200 p-6">
                                <div className="mb-4">
                                    <h3 className="text-lg font-bold text-slate-900">Demand Allocation Waterfall</h3>
                                </div>
                                <div className="h-64">
                                    <canvas id="waterfallChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Demand Page
        function DemandPage() {
            const months = ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL'];

            const forecastPerformanceData = [
                { sku: 'SKU-2041 Refined Sugar', channel: 'Retail', forecast: '1,240T', actual: '1,230T', accuracy: '99.2%', status: 'high' },
                { sku: 'SKU-9920 Organic Cane', channel: 'B2B', forecast: '850T', actual: '780T', accuracy: '91.7%', status: 'medium' },
                { sku: 'SKU-3112 Molasses', channel: 'Industrial', forecast: '3,400T', actual: '3,395T', accuracy: '99.8%', status: 'high' },
                { sku: 'SKU-1022 Liquid Sugar', channel: 'Export', forecast: '660T', actual: '450T', accuracy: '75.0%', status: 'critical' },
            ];

            useEffect(() => {
                const forecastVsActualCtx = document.getElementById('forecastVsActualChart');
                const accuracyByChannelCtx = document.getElementById('accuracyByChannelChart');

                if (forecastVsActualCtx) {
                    new Chart(forecastVsActualCtx, {
                        type: 'bar',
                        data: {
                            labels: months,
                            datasets: [
                                {
                                    label: 'Forecast',
                                    data: [48000, 52000, 45000, 58000, 50000, 54000, 60000],
                                    backgroundColor: '#10b981',
                                    borderRadius: 4
                                },
                                {
                                    label: 'Actual',
                                    data: [46000, 51000, 44000, 56000, 49000, 53000, 59000],
                                    backgroundColor: '#94a3b8',
                                    borderRadius: 4
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: { padding: 15, usePointStyle: true, font: { size: 11 } }
                                }
                            },
                            scales: {
                                x: { grid: { display: false }, ticks: { font: { size: 10 } } },
                                y: { 
                                    grid: { color: '#f1f5f9' }, 
                                    ticks: { 
                                        font: { size: 10 },
                                        callback: (value) => (value / 1000) + 'K'
                                    }
                                }
                            }
                        }
                    });
                }

                if (accuracyByChannelCtx) {
                    new Chart(accuracyByChannelCtx, {
                        type: 'bar',
                        data: {
                            labels: ['B2B Industrial', 'Retail Distribution', 'E-Commerce', 'Export Markets'],
                            datasets: [{
                                data: [96.4, 91.2, 78.5, 94.0],
                                backgroundColor: ['#10b981', '#10b981', '#f87171', '#10b981'],
                                borderRadius: 6
                            }]
                        },
                        options: {
                            indexAxis: 'y',
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: {
                                x: { grid: { color: '#f1f5f9' }, min: 0, max: 100, ticks: { font: { size: 10 } } },
                                y: { grid: { display: false }, ticks: { font: { size: 11 } } }
                            }
                        }
                    });
                }
            }, []);

            return (
                <div className="flex-1 overflow-auto bg-slate-50">
                    <DashboardHeader 
                        title="Demand Planning Analysis" 
                        subtitle="Last updated: Oct 24, 2023, 08:30 AM (UTC+7)"
                    />
                    
                    <div className="p-8 space-y-6">
                        {/* Action Bar */}
                        <div className="flex items-center justify-between">
                            <div className="text-sm text-slate-600">
                                S&OP PLANNING â†’ <span className="font-semibold text-slate-900">DEMAND PLANNING ANALYSIS</span>
                            </div>
                            <div className="flex items-center gap-3">
                                <button className="flex items-center gap-2 px-4 py-2 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">
                                    <Filter className="w-4 h-4" />
                                    Filters
                                </button>
                                <button className="flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg text-sm font-medium hover:bg-slate-800">
                                    <Download className="w-4 h-4" />
                                    Export Report
                                </button>
                            </div>
                        </div>

                        {/* KPI Cards */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            <MetricCard
                                title="Total Forecast Qty"
                                value="50,000"
                                unit="Tons"
                                change="+5.2%"
                                changeType="positive"
                                progressBar={{ value: 75, color: 'bg-emerald-500' }}
                            />
                            <MetricCard
                                title="Actual Sales Qty"
                                value="48,500"
                                unit="Tons"
                                change="-1.8%"
                                changeType="negative"
                                progressBar={{ value: 72, color: 'bg-blue-500' }}
                            />
                            <MetricCard
                                title="Forecast Accuracy %"
                                value="92.0%"
                                change="+0.5%"
                                changeType="positive"
                                progressBar={{ value: 92, color: 'bg-emerald-500' }}
                            />
                            <MetricCard
                                title="Forecast Bias"
                                value="+2.1%"
                                change="Attention Req."
                                changeType="warning"
                                progressBar={{ value: 65, color: 'bg-amber-500' }}
                            />
                        </div>

                        {/* Charts */}
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div className="bg-white rounded-xl border border-slate-200 p-6">
                                <div className="flex items-center justify-between mb-4">
                                    <div>
                                        <h3 className="text-lg font-bold text-slate-900">Forecast vs Actual Sales Volume (Tons)</h3>
                                        <div className="flex items-center gap-2 mt-1">
                                            <span className="inline-flex items-center gap-1 text-xs text-emerald-600 font-semibold">FORECAST</span>
                                            <span className="inline-flex items-center gap-1 text-xs text-slate-600 font-semibold">ACTUAL</span>
                                        </div>
                                    </div>
                                </div>
                                <div className="h-80">
                                    <canvas id="forecastVsActualChart"></canvas>
                                </div>
                            </div>

                            <div className="bg-white rounded-xl border border-slate-200 p-6">
                                <div className="mb-4">
                                    <h3 className="text-lg font-bold text-slate-900">Accuracy by Channel</h3>
                                </div>
                                <div className="h-64">
                                    <canvas id="accuracyByChannelChart"></canvas>
                                </div>
                                <div className="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-start gap-2">
                                    <Info className="w-4 h-4 text-blue-600 mt-0.5 shrink-0" />
                                    <p className="text-xs text-blue-700">
                                        <strong>PLANNING INSIGHT:</strong> High bias observed in E-Commerce due to promotional activity in Week 42. Adjustment recommended for Q4.
                                    </p>
                                </div>
                            </div>
                        </div>

                        {/* Granular Forecast Performance Table */}
                        <div className="bg-white rounded-xl border border-slate-200 p-6">
                            <div className="flex items-center justify-between mb-4">
                                <div>
                                    <h3 className="text-lg font-bold text-slate-900">Granular Forecast Performance</h3>
                                    <p className="text-sm text-slate-500 mt-1">SKU-level accuracy analysis</p>
                                </div>
                                <button className="text-sm font-medium text-emerald-600 hover:text-emerald-700">
                                    VIEW ALL RECORDS â†’
                                </button>
                            </div>
                            
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead>
                                        <tr className="border-b border-slate-200">
                                            <th className="text-left py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">SKU Details</th>
                                            <th className="text-left py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">Channel</th>
                                            <th className="text-right py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">Forecast (T)</th>
                                            <th className="text-right py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">Actual (T)</th>
                                            <th className="text-right py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">Accuracy</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {forecastPerformanceData.map((row, index) => (
                                            <tr key={index} className="border-b border-slate-100 hover:bg-slate-50">
                                                <td className="py-4 px-4">
                                                    <div className="flex items-center gap-3">
                                                        <div className={`w-2 h-2 rounded-full ${
                                                            row.status === 'high' ? 'bg-emerald-500' :
                                                            row.status === 'medium' ? 'bg-amber-500' :
                                                            'bg-rose-500'
                                                        }`} />
                                                        <span className="text-sm font-medium text-slate-900">{row.sku}</span>
                                                    </div>
                                                </td>
                                                <td className="py-4 px-4">
                                                    <span className="inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-700">
                                                        {row.channel}
                                                    </span>
                                                </td>
                                                <td className="py-4 px-4 text-right text-sm text-slate-900">{row.forecast}</td>
                                                <td className="py-4 px-4 text-right text-sm text-slate-900">{row.actual}</td>
                                                <td className="py-4 px-4 text-right">
                                                    <span className={`inline-flex items-center px-2.5 py-1 rounded-md text-xs font-bold ${
                                                        row.status === 'high' ? 'bg-emerald-100 text-emerald-700' :
                                                        row.status === 'medium' ? 'bg-amber-100 text-amber-700' :
                                                        'bg-rose-100 text-rose-700'
                                                    }`}>
                                                        {row.accuracy}
                                                    </span>
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>

                            <div className="mt-4 flex items-center justify-between text-xs text-slate-500">
                                <div className="flex items-center gap-4">
                                    <div className="flex items-center gap-2">
                                        <div className="w-3 h-3 rounded-full bg-emerald-500" />
                                        <span>High Accuracy (â‰¥90%)</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <div className="w-3 h-3 rounded-full bg-amber-500" />
                                        <span>Medium Risk (80-90%)</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <div className="w-3 h-3 rounded-full bg-rose-500" />
                                        <span>Critical Error (&lt;80%)</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <p className="text-xs text-slate-400 text-center">Â© 2023 TTC AGRIS PLANNING SUITE</p>
                    </div>
                </div>
            );
        }

        // Supply Page
        function SupplyPage() {
            const months = ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN'];

            const supplierOTIFData = [
                { region: 'Mekong Delta', percentage: 94, color: 'bg-emerald-500' },
                { region: 'Central Highlands', percentage: 89, color: 'bg-blue-500' },
                { region: 'South Central', percentage: 76, color: 'bg-amber-500' },
                { region: 'Northern Plains', percentage: 62, color: 'bg-rose-500' }
            ];

            const productionDetails = [
                { plant: 'Mill A - Tay Ninh', line: 'L1-Refining', sku: 'Refined Sugar 1kg', planned: '12,500', actual: '12,480', badge: 'R51' },
                { plant: 'Mill A - Tay Ninh', line: 'L3-Packaging', sku: 'Brown Sugar 50kg', planned: '8,000', actual: '6,120', badge: 'B55' },
                { plant: 'Mill B - Gia Lai', line: 'L2-Extraction', sku: 'Organic Sugar Bulk', planned: '15,000', actual: '14,200', badge: 'ORG' },
            ];

            useEffect(() => {
                const planAdherenceCtx = document.getElementById('planAdherenceChart');
                const capacityCtx = document.getElementById('capacityChart');

                if (planAdherenceCtx) {
                    new Chart(planAdherenceCtx, {
                        type: 'bar',
                        data: {
                            labels: months,
                            datasets: [
                                {
                                    label: 'Planned',
                                    data: [8500, 9200, 8800, 9500, 9000, 9300],
                                    backgroundColor: '#bfdbfe',
                                    borderRadius: 4
                                },
                                {
                                    label: 'Actual',
                                    data: [8200, 9000, 8600, 9300, 8800, 9100],
                                    backgroundColor: '#2563eb',
                                    borderRadius: 4
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: { padding: 15, usePointStyle: true, font: { size: 11 } }
                                }
                            },
                            scales: {
                                x: { grid: { display: false }, ticks: { font: { size: 10 } } },
                                y: { 
                                    grid: { color: '#f1f5f9' }, 
                                    ticks: { 
                                        font: { size: 10 },
                                        callback: (value) => (value / 1000) + 'K'
                                    }
                                }
                            }
                        }
                    });
                }

                if (capacityCtx) {
                    new Chart(capacityCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['Utilized', 'Available'],
                            datasets: [{
                                data: [78.5, 21.5],
                                backgroundColor: ['#10b981', '#e2e8f0'],
                                borderWidth: 0
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            cutout: '75%',
                            plugins: {
                                legend: { display: false },
                                tooltip: {
                                    callbacks: {
                                        label: (context) => context.label + ': ' + context.parsed + '%'
                                    }
                                }
                            }
                        }
                    });
                }
            }, []);

            return (
                <div className="flex-1 overflow-auto bg-slate-50">
                    <DashboardHeader 
                        title="Supply Planning & Capacity" 
                        subtitle="TTC AgriS S&OP/IBP Planning Dashboard"
                    />
                    
                    <div className="p-8 space-y-6">
                        {/* Navigation */}
                        <div className="flex items-center gap-2">
                            <button className="px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-medium">
                                Supply Dashboard
                            </button>
                            <button className="px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg text-sm font-medium">
                                Plant Analysis
                            </button>
                            <button className="px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg text-sm font-medium">
                                Supplier Performance
                            </button>
                        </div>

                        {/* KPI Cards */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            <MetricCard
                                title="Total Supply Plan"
                                value="45.2M"
                                unit="Tons"
                                change="Planned: 42.8M (Actual)"
                                changeType="negative"
                            />
                            <MetricCard
                                title="Plan Adherence %"
                                value="94.7%"
                                change="+2.1% vs prev. month"
                                changeType="positive"
                            />
                            <MetricCard
                                title="Capacity Utilization"
                                value="78.5%"
                                change="Target: 85.0%"
                                changeType="warning"
                            />
                            <MetricCard
                                title="Supplier OTIF"
                                value="88.2%"
                                change="In-line with target"
                                changeType="neutral"
                            />
                        </div>

                        {/* Charts */}
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div className="lg:col-span-2 bg-white rounded-xl border border-slate-200 p-6">
                                <div className="mb-4">
                                    <h3 className="text-lg font-bold text-slate-900">Supply Plan Adherence by Plant</h3>
                                    <p className="text-sm text-slate-500 mt-1">Rolling 6 Months Performance (Mill A vs Mill B)</p>
                                </div>
                                <div className="h-80">
                                    <canvas id="planAdherenceChart"></canvas>
                                </div>
                            </div>

                            <div className="bg-white rounded-xl border border-slate-200 p-6">
                                <div className="mb-4">
                                    <h3 className="text-lg font-bold text-slate-900">Capacity Utilization</h3>
                                </div>
                                <div className="relative h-64 flex items-center justify-center">
                                    <canvas id="capacityChart"></canvas>
                                    <div className="absolute inset-0 flex flex-col items-center justify-center pointer-events-none">
                                        <div className="text-4xl font-bold text-slate-900">78.5%</div>
                                        <div className="text-xs text-slate-500 uppercase tracking-wide mt-1">Utilization</div>
                                    </div>
                                </div>
                                <div className="mt-4 flex items-center justify-between text-xs">
                                    <div>
                                        <span className="text-slate-500">Peak Load: </span>
                                        <span className="font-bold text-slate-900">92%</span>
                                    </div>
                                    <div>
                                        <span className="text-slate-500">Idle: </span>
                                        <span className="font-bold text-slate-900">21.5%</span>
                                    </div>
                                </div>
                                <div className="mt-2 text-[10px] text-emerald-600 font-bold uppercase tracking-wide">
                                    Target 85%
                                </div>
                            </div>
                        </div>

                        {/* Supplier OTIF and Production Detail */}
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div className="bg-white rounded-xl border border-slate-200 p-6">
                                <div className="mb-6">
                                    <h3 className="text-lg font-bold text-slate-900">Supplier OTIF by Region</h3>
                                </div>
                                <div className="space-y-4">
                                    {supplierOTIFData.map((item, index) => (
                                        <div key={index}>
                                            <div className="flex items-center justify-between mb-2">
                                                <span className="text-xs font-medium text-slate-600 uppercase">{item.region}</span>
                                                <span className="text-sm font-bold text-slate-900">{item.percentage}%</span>
                                            </div>
                                            <div className="w-full bg-slate-100 rounded-full h-2">
                                                <div 
                                                    className={`h-2 rounded-full ${item.color}`}
                                                    style={{ width: `${item.percentage}%` }}
                                                />
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                <button className="mt-6 w-full py-2 border border-slate-200 rounded-lg text-sm font-medium text-slate-700 hover:bg-slate-50">
                                    VIEW REGIONAL DETAIL
                                </button>
                            </div>

                            <div className="lg:col-span-2 bg-white rounded-xl border border-slate-200 p-6">
                                <div className="flex items-center justify-between mb-4">
                                    <div>
                                        <h3 className="text-lg font-bold text-slate-900">Production Adherence Detail</h3>
                                    </div>
                                    <div className="flex items-center gap-3">
                                        <button className="flex items-center gap-2 px-3 py-1.5 border border-slate-200 rounded-lg text-xs font-medium hover:bg-slate-50">
                                            <Filter className="w-3 h-3" />
                                            Filter
                                        </button>
                                        <button className="flex items-center gap-2 px-3 py-1.5 border border-slate-200 rounded-lg text-xs font-medium hover:bg-slate-50">
                                            <Download className="w-3 h-3" />
                                            Export
                                        </button>
                                    </div>
                                </div>
                                
                                <div className="overflow-x-auto">
                                    <table className="w-full">
                                        <thead>
                                            <tr className="border-b border-slate-200">
                                                <th className="text-left py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">Plant</th>
                                                <th className="text-left py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">Line</th>
                                                <th className="text-left py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">SKU</th>
                                                <th className="text-right py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">Planned (T)</th>
                                                <th className="text-right py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">Actual (T)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {productionDetails.map((row, index) => (
                                                <tr key={index} className="border-b border-slate-100 hover:bg-slate-50">
                                                    <td className="py-4 px-4">
                                                        <span className="text-sm font-medium text-slate-900">{row.plant}</span>
                                                    </td>
                                                    <td className="py-4 px-4">
                                                        <span className="text-sm text-slate-700">{row.line}</span>
                                                    </td>
                                                    <td className="py-4 px-4">
                                                        <div className="flex items-center gap-2">
                                                            <span className={`inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold ${
                                                                row.badge === 'R51' ? 'bg-emerald-100 text-emerald-700' :
                                                                row.badge === 'B55' ? 'bg-blue-100 text-blue-700' :
                                                                'bg-amber-100 text-amber-700'
                                                            }`}>
                                                                {row.badge}
                                                            </span>
                                                            <span className="text-sm text-slate-700">{row.sku}</span>
                                                        </div>
                                                    </td>
                                                    <td className="py-4 px-4 text-right text-sm text-slate-900">{row.planned}</td>
                                                    <td className="py-4 px-4 text-right">
                                                        <span className={`text-sm font-medium ${
                                                            parseInt(row.actual.replace(',', '')) >= parseInt(row.planned.replace(',', '')) * 0.95
                                                                ? 'text-emerald-600'
                                                                : 'text-rose-600'
                                                        }`}>
                                                            {row.actual}
                                                        </span>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Inventory Page
        function InventoryPage() {
            const months = ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN'];

            const inventoryByLocation = [
                { location: 'Central Warehouse - HCM', category: 'Refined Sugar', stock: '2,450T', dos: '28 days', status: 'healthy', utilization: 82 },
                { location: 'Northern Distribution - Hanoi', category: 'Brown Sugar', stock: '1,850T', dos: '22 days', status: 'low', utilization: 65 },
                { location: 'Regional Hub - Da Nang', category: 'Organic Products', stock: '950T', dos: '35 days', status: 'excess', utilization: 95 },
                { location: 'Export Terminal - Hai Phong', category: 'Bulk Sugar', stock: '3,200T', dos: '18 days', status: 'critical', utilization: 45 },
            ];

            useEffect(() => {
                const inventoryTrendCtx = document.getElementById('inventoryTrendChart');
                const stockoutCtx = document.getElementById('stockoutChart');

                if (inventoryTrendCtx) {
                    new Chart(inventoryTrendCtx, {
                        type: 'bar',
                        data: {
                            labels: months,
                            datasets: [
                                {
                                    type: 'bar',
                                    label: 'Inventory Qty',
                                    data: [6500, 6700, 6400, 6300, 6200, 6100],
                                    backgroundColor: '#94a3b8',
                                    borderRadius: 4,
                                    yAxisID: 'y'
                                },
                                {
                                    type: 'line',
                                    label: 'Days of Supply',
                                    data: [32, 31, 29, 28, 27, 26],
                                    borderColor: '#10b981',
                                    backgroundColor: '#10b981',
                                    yAxisID: 'y1',
                                    tension: 0.4
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: { padding: 15, usePointStyle: true, font: { size: 11 } }
                                }
                            },
                            scales: {
                                x: { grid: { display: false }, ticks: { font: { size: 10 } } },
                                y: { 
                                    position: 'left',
                                    grid: { color: '#f1f5f9' }, 
                                    ticks: { 
                                        font: { size: 10 },
                                        callback: (value) => (value / 1000) + 'K'
                                    }
                                },
                                y1: {
                                    position: 'right',
                                    grid: { display: false },
                                    ticks: { 
                                        font: { size: 10 },
                                        callback: (value) => value + ' days'
                                    }
                                }
                            }
                        }
                    });
                }

                if (stockoutCtx) {
                    new Chart(stockoutCtx, {
                        type: 'bar',
                        data: {
                            labels: ['AgriC', 'ProC', 'ComC'],
                            datasets: [{
                                label: 'Stockout Days',
                                data: [4, 7, 10],
                                backgroundColor: ['#10b981', '#eab308', '#ef4444'],
                                borderRadius: 6
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: { padding: 15, usePointStyle: true, font: { size: 11 } }
                                }
                            },
                            scales: {
                                x: { grid: { display: false }, ticks: { font: { size: 10 } } },
                                y: { 
                                    grid: { color: '#f1f5f9' }, 
                                    ticks: { 
                                        font: { size: 10 },
                                        callback: (value) => value + ' days'
                                    }
                                }
                            }
                        }
                    });
                }
            }, []);

            return (
                <div className="flex-1 overflow-auto bg-slate-50">
                    <DashboardHeader 
                        title="Inventory Management" 
                        subtitle="Real-time stock levels and Days of Supply tracking"
                    />
                    
                    <div className="p-8 space-y-6">
                        {/* KPI Cards */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            <MetricCard
                                title="Total Inventory"
                                value="8,450"
                                unit="Tons"
                                change="-2.4%"
                                changeType="positive"
                            />
                            <MetricCard
                                title="Days of Supply"
                                value="26"
                                unit="Days"
                                change="Target: 30 days"
                                changeType="warning"
                            />
                            <MetricCard
                                title="Stock Turnover"
                                value="14.2x"
                                change="+1.5x vs prev. quarter"
                                changeType="positive"
                            />
                            <MetricCard
                                title="Stockout Risk"
                                value="3"
                                unit="SKUs"
                                change="2 Critical"
                                changeType="negative"
                            />
                        </div>

                        {/* Charts */}
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div className="bg-white rounded-xl border border-slate-200 p-6">
                                <div className="mb-4">
                                    <h3 className="text-lg font-bold text-slate-900">Inventory Qty & Days of Supply</h3>
                                    <p className="text-sm text-slate-500 mt-1">6-month trend analysis</p>
                                </div>
                                <div className="h-80">
                                    <canvas id="inventoryTrendChart"></canvas>
                                </div>
                            </div>

                            <div className="bg-white rounded-xl border border-slate-200 p-6">
                                <div className="mb-4">
                                    <h3 className="text-lg font-bold text-slate-900">Stockout Events by Category</h3>
                                    <p className="text-sm text-slate-500 mt-1">Total days out-of-stock in last 30 days</p>
                                </div>
                                <div className="h-80">
                                    <canvas id="stockoutChart"></canvas>
                                </div>
                            </div>
                        </div>

                        {/* Inventory by Location Table */}
                        <div className="bg-white rounded-xl border border-slate-200 p-6">
                            <div className="flex items-center justify-between mb-4">
                                <div>
                                    <h3 className="text-lg font-bold text-slate-900">Inventory by Location</h3>
                                    <p className="text-sm text-slate-500 mt-1">Current stock levels across distribution network</p>
                                </div>
                            </div>
                            
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead>
                                        <tr className="border-b border-slate-200">
                                            <th className="text-left py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">Location</th>
                                            <th className="text-left py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">Category</th>
                                            <th className="text-right py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">Stock Level</th>
                                            <th className="text-right py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">Days of Supply</th>
                                            <th className="text-right py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">Utilization</th>
                                            <th className="text-center py-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wide">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {inventoryByLocation.map((row, index) => (
                                            <tr key={index} className="border-b border-slate-100 hover:bg-slate-50">
                                                <td className="py-4 px-4">
                                                    <div className="flex items-center gap-2">
                                                        <Package className="w-4 h-4 text-slate-400" />
                                                        <span className="text-sm font-medium text-slate-900">{row.location}</span>
                                                    </div>
                                                </td>
                                                <td className="py-4 px-4">
                                                    <span className="text-sm text-slate-700">{row.category}</span>
                                                </td>
                                                <td className="py-4 px-4 text-right text-sm font-medium text-slate-900">{row.stock}</td>
                                                <td className="py-4 px-4 text-right">
                                                    <span className={`text-sm font-medium ${
                                                        row.status === 'critical' ? 'text-rose-600' :
                                                        row.status === 'low' ? 'text-amber-600' :
                                                        row.status === 'excess' ? 'text-blue-600' :
                                                        'text-emerald-600'
                                                    }`}>
                                                        {row.dos}
                                                    </span>
                                                </td>
                                                <td className="py-4 px-4">
                                                    <div className="flex items-center justify-end gap-2">
                                                        <div className="w-20 bg-slate-100 rounded-full h-2">
                                                            <div 
                                                                className={`h-2 rounded-full ${
                                                                    row.utilization >= 80 ? 'bg-emerald-500' :
                                                                    row.utilization >= 60 ? 'bg-amber-500' :
                                                                    'bg-rose-500'
                                                                }`}
                                                                style={{ width: `${row.utilization}%` }}
                                                            />
                                                        </div>
                                                        <span className="text-xs font-medium text-slate-600 w-10 text-right">{row.utilization}%</span>
                                                    </div>
                                                </td>
                                                <td className="py-4 px-4 text-center">
                                                    <span className={`inline-flex items-center gap-1 px-2.5 py-1 rounded-md text-xs font-bold ${
                                                        row.status === 'healthy' ? 'bg-emerald-100 text-emerald-700' :
                                                        row.status === 'low' ? 'bg-amber-100 text-amber-700' :
                                                        row.status === 'excess' ? 'bg-blue-100 text-blue-700' :
                                                        'bg-rose-100 text-rose-700'
                                                    }`}>
                                                        {row.status === 'critical' && <AlertTriangle className="w-3 h-3" />}
                                                        {row.status.toUpperCase()}
                                                    </span>
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>

                            <div className="mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-3">
                                <AlertTriangle className="w-5 h-5 text-amber-600 shrink-0 mt-0.5" />
                                <div>
                                    <p className="text-sm font-bold text-amber-900">Inventory Alert</p>
                                    <p className="text-xs text-amber-700 mt-1">
                                        Export Terminal - Hai Phong is running critically low (18 days). Recommend expedited production allocation from Mill A to prevent stockout.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // ==================== MAIN APP ====================
        function App() {
            const [currentPage, setCurrentPage] = useState('overview');

            const renderPage = () => {
                switch (currentPage) {
                    case 'overview': return <OverviewPage />;
                    case 'demand': return <DemandPage />;
                    case 'supply': return <SupplyPage />;
                    case 'inventory': return <InventoryPage />;
                    default: return <OverviewPage />;
                }
            };

            return (
                <div className="flex h-screen bg-slate-50">
                    <Sidebar currentPage={currentPage} onNavigate={setCurrentPage} />
                    <div className="flex-1 flex flex-col overflow-hidden">
                        {renderPage()}
                    </div>
                </div>
            );
        }

        // Render the app
        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
